<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <style>
    #prompt-form {
      display: inline-block;
      padding: 5px 5px 5px 70px;
      width: 200px;
      border: 1px solid black;
      background: white url(https://js.cx/clipart/prompt.png) no-repeat left 5px;
      vertical-align: middle;
    }

    #prompt-form-container {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1000;
      width: 100%;
      height: 100%;
      text-align: center;
    }

    #prompt-form-container:before {
      display: inline-block;
      height: 100%;
      content: '';
      vertical-align: middle;
    }

    #prompt-form input[name="text"] {
      display: block;
      margin: 5px;
      width: 180px;
    }
    .warning {
      color:red;
    }
  </style>
</head>

<body>
  <div class="formsSumbit">
    <div class="fSumbit1">
      <h3><a href="https://learn.javascript.ru/forms-submit#modalnoe-dialogovoe-okno">Модальное диалоговое окно</a></h3>
      <button id="showHidePrompt">показать форму</button>
      <div id="prompt-form-container" hidden>
        <form id="prompt-form">
          <div id="promptMessage">Введите, пожалуйста...
            <br>Что-то..</div>
          <input name="text" type="text">
          <input type="submit" value="Ок">
          <input type="button" name="cancel" value="Отмена">
        </form>
      </div>
    </div>
    <div class="fSumbit2">
      <h3><a href="https://learn.javascript.ru/forms-submit#validatsiya-formy">Валидация формы</a></h3>
      <div>
        <form id='validateform'>
          <table>
            <tr>
              <td>От кого</td>
              <td>
                <input name="from" type="text">
                <span class="warning" hidden>укажите отправителя</span>
              </td>
            </tr>
            <tr>
              <td>Ваш пароль</td>
              <td>
                <input name="password" type="password">
                <span class="warning" hidden>Введите пароль</span>
              </td>
            </tr>
            <tr>
              <td>Повторите пароль</td>
              <td>
                <input name="password2" type="password">
                <span class="warning" hidden>Пароль не совпадает</span>
              </td>
            </tr>
            <tr>
              <td>Куда</td>
              <td>
                <select name="to">
                  <option></option>
                  <option value="1">Отдел снабжения</option>
                  <option value="2">Отдел разработки</option>
                  <option value="3">Директору</option>
                </select>
                <span class="warning" hidden>Укажите получателя</span>
              </td>
            </tr>
          </table>
      
          Сообщение:
          <label>
            <!-- <span class="warning" hidden>как насчет текста?</span> -->
            <textarea name="message" style="display:block;width:400px;height:100px"></textarea>
            <span class="warning" hidden>как насчет текста?</span><br>
          </label>
      
          <input type="button" onclick="validate(this.form)" value="Проверить">
        </form>
      </div>
    </div>
  </div>




</body>
<script>
  let formModal = document.getElementById('prompt-form');
  let textForm = formModal.children[1];
  let smbtForm = formModal.children[2];
  let cnlForm = formModal.children[3];

  cnlForm.onkeydown = function(e){
    if(e.keyCode == 9 && !e.shiftKey) {
      textForm.focus();
      return false;
    }
  }
  textForm.onkeydown = function(e){
    if(e.keyCode == 9 && e.shiftKey) {
      cnlForm.focus();
      return false;
    }
  }
  showHidePrompt.onclick = function () {
    let show = document.getElementById('prompt-form-container');
    show.hidden = false;
    textForm.focus();
  }

  document.onkeydown = function(e){
    if(e.keyCode !=27)return;
    let show = document.getElementById('prompt-form-container');
    if(show.hidden == false)show.hidden = true;
    console.log(show.hidden);
  }
  function showPrompt(text, callback) {
    promptMessage.innerHTML = text;
    formModal.onsubmit = function () {
      let val = textForm.value;
      console.log(val);
      callback('Вы ввели: '+val);
      // return false;
    };
  }
  cnlForm.onclick = function(){
    let show = document.getElementById('prompt-form-container');
    show.hidden = true;
  }

  showPrompt('изменено через функцию', function (vl) {alert(vl)});
  // 2
  /*
  function validate(form) {
      if(form.from.value.trim() == ""){
        form.from.nextElementSibling.hidden = false;
        form.from.style.borderColor = 'red';
        form.from.focus();
        return false;
      }else{
        form.from.style.borderColor = '';
        form.from.nextElementSibling.hidden = true;
      }
      if(form.password.value.trim()==''){
        form.password.nextElementSibling.hidden = false;
        form.password.style.borderColor = 'red';
        form.password.focus();
        return false;
      }else{
        form.password.style.borderColor = '';
        form.password.nextElementSibling.hidden = true;
      }
      if(form.password2.value!=form.password.value ){
        form.password2.nextElementSibling.hidden = false;
        form.password2.style.borderColor = 'red';
        form.password.style.borderColor = 'red';
        form.password2.focus();
        return false;
      }else{
        form.password2.style.borderColor = '';
        form.password.style.borderColor = '';
        form.password2.nextElementSibling.hidden = true;
      }
      if(form.to.value == ""){
        form.to.nextElementSibling.hidden = false;
        form.to.style.borderColor = 'red';
        form.to.focus();
        return false;
      }else{
        form.to.style.borderColor = '';
        form.to.nextElementSibling.hidden = true;
      }
      if(form.message.value.trim() == ""){
        form.message.previousElementSibling.hidden = false;
        form.message.style.borderColor = 'red';
        form.message.focus();
        return false;
      }else{
        form.message.style.borderColor = '';
        form.message.previousElementSibling.hidden = true;
      }
    }
    */
      function validate(form) {
        let flag = true;
        for (let i = 0; i < form.length - 1; i++) {
          if (form[i].value.trim() == "") {
            form[i].nextElementSibling.hidden = false;
            form[i].style.borderColor = 'red';
            flag = false;
          } else {
            form[i].nextElementSibling.hidden = true;
            form[i].style.borderColor = '';
          }
        }
        if (form.password2.value != form.password.value) {
            form.password2.nextElementSibling.hidden = false;
            form.password2.style.borderColor = 'red';
            form.password.style.borderColor = 'red';
            flag = false;
          } else {
            form.password2.style.borderColor = '';
            form.password.style.borderColor = '';
            form.password2.nextElementSibling.hidden = true;
          }
        // console.log(form,flag);
        return(flag);  
      }
</script>

</html>