<!DOCTYPE HTML>
<html>

<head>

  <meta charset="utf-8">
  <style>
    .eventDelegationH3{
      text-align: center;
    }
    .eventDelegation{
      display: flex;
      justify-content:space-around;
    }
    #delMessages{
      width: 470px;
    }
    #delMessages h3 {
      margin: 0;
      padding-bottom: .3em;
      font-size: 1.1em;
    }

    #delMessages p {
      margin: 0;
      padding: 0 0 .5em;
    }

    .pane {
      background: #edf5e1;
      padding: 10px 20px 10px;
      border-top: solid 2px #c4df9b;
    }

    .remove-button {
      font-size: 110%;
      color: darkred;
      right: 10px;
      width: 24px;
      height: 24px;
      border: none;
      background: transparent;
      cursor: pointer;
      float: right;
    }

    .tree3 span {
      cursor: pointer;
    }

    .tree3 span:hover {
      font-weight: bold;
    }

    .hide {
      display: none;
    }

    #grid {
      border: 3px solid #9d9d9d;
      border-spacing: 0px 2px;
      border-radius: 12px;
      background-color:#fff9cced;
      padding: 0 10px;
      
    }

    #grid td {
      border-top: 1px solid #9d9d9d;
    }

    #grid th {
      cursor: pointer;
    }

    #grid th:hover {
      color:crimson;
    }
  </style>
</head>

<body>
  <div class="eventDelegationH3">
    <h3><a href="https://learn.javascript.ru/event-delegation">Делегирование событий</a></h3>
  
<div class="eventDelegation">


  <div id="delMessages">
   
    <div class="pane">
      <button class="remove-button">[x]</button>
      <h3>Лошадь</h3>
      <p>Домашняя лошадь — животное семейства непарнокопытных, одомашненный и единственный сохранившийся подвид дикой
        лошади, вымершей в дикой природе, за исключением небольшой популяции лошади Пржевальского.</p>
    </div>
    <div class="pane">
      <button class="remove-button">[x]</button>
      <h3>Осёл</h3>
      <p>Домашний осёл или ишак — одомашненный подвид дикого осла, сыгравший важную историческую роль в развитии
        хозяйства и культуры человека. Все одомашненные ослы относятся к африканским ослам.</p>
    </div>
    <div class="pane">
      <button class="remove-button">[x]</button>
      <h3>Корова, а также пара слов о диком быке, о волах и о тёлках. </h3>
      <p>Коро́ва — самка домашнего быка, одомашненного подвида дикого быка, парнокопытного жвачного животного семейства
        полорогих. Самцы вида называются быками, молодняк — телятами, кастрированные самцы — волами. Молодых (до первой
        стельности) самок называют
        тёлками.
      </p>
    </div>
  </div>
  <ul class="tree3">
    <li>Животные
      <ul>
        <li>Млекопитающие
          <ul>
            <li>Коровы</li>
            <li>Ослы</li>
            <li>Собаки</li>
            <li>Тигры</li>
          </ul>
        </li>
        <li>Другие
          <ul>
            <li>Змеи</li>
            <li>Птицы</li>
            <li>Ящерицы</li>
          </ul>
        </li>
      </ul>
    </li>
    <li>Рыбы
      <ul>
        <li>Аквариумные
          <ul>
            <li>Гуппи</li>
            <li>Скалярии</li>
          </ul>

        </li>
        <li>Морские
          <ul>
            <li>Морская форель</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>

  <table id="grid">
    <thead>
      <tr>
        <th data-type="number">Возраст</th>
        <th data-type="string">Имя</th>
      </tr>
    </thead>
    <tbody>
        <tbody>
            <tr>
              <td>5</td>
              <td>Вася</td>
            </tr>
            <tr>
              <td>2</td>
              <td>Петя</td>
            </tr>
            <tr>
              <td>12</td>
              <td>Женя</td>
            </tr>
            <tr>
              <td>9</td>
              <td>Маша</td>
            </tr>
            <tr>
              <td>1</td>
              <td>Илья</td>
            </tr>
          </tbody>
    </tbody>
    </tab>
  </div> 
</div>
</body>
<script>
  "use strict";
  delMessages.onclick = function (event) {
    let target = event.target;
    if (target.className != 'remove-button') return;
    let removeButton = target.closest('.pane');
    removeButton.style.display = 'none';
  }
  //задача 2 
  let tree3 = document.querySelector('.tree3');
  let arrayLi = tree3.getElementsByTagName('li');

  let addSpan = function (elem) {
    let span = document.createElement('span');
    elem.insertBefore(span, elem.firstChild);
    span.appendChild(span.nextSibling);
  }
  for (let i = 0; i < arrayLi.length; i++) {
    addSpan(arrayLi[i]);
  }

  tree3.onclick = function (event) {
    let target = event.target;
    if (target.tagName != "SPAN") return;
    let li = target.closest('li');
    // console.log(li)
    if (li.childElementCount > 1) {
      // console.log(li.children[1]);
      li.children[1].classList.toggle('hide');
      // li.children[1].hidden = !li.children[1].hidden;
    }
  }
  grid.onclick = function (event) {
  let bTime = 0;
  let d = new Date();
  let target = event.target;
  let select;
  if (target.getAttribute('data-type') == 'number'){
    select = 0;
  } else if (target.getAttribute('data-type') == 'string'){
    select = 1;
  } else return;

  let bStep = 0;

  function bubblesort(tab) { //БаблСортировка без рекурсии
    let len = tab.rows.length;
    let rows = tab.rows;
    let i = 0;
    let j = 0;
    for (i = 1; i < len; i++) {
     let cTd = rows[i];
     let  cValue;
     if(select){
       cValue = rows[i].cells[select].innerHTML;
     }else{
        cValue = +rows[i].cells[select].innerHTML;
     }
    
      j = i - 1;
      while (j > 0 && (rows[j].cells[select].innerHTML) > cValue) {
        
        rows[j - 1].insertAdjacentElement('afterEnd', cTd);
        j--;
        bStep++;
      };
      bStep++;
    }

  };
  bubblesort(grid);
  bTime += new Date() - d;
  console.log(target, bTime + ' ms', bStep + ' Steps');
}
  
</script>

</html>